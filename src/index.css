@tailwind base;
@tailwind components;
@tailwind utilities;

/* ──────────────────────────────────────────────
   Variables de tema + base
   ────────────────────────────────────────────── */
:root {
  color-scheme: light dark;
  --bg: #0b0b0e;
  --bg-grad-1: radial-gradient(1400px 600px at 50% -10%, rgba(120,119,198,.10), transparent 60%);
  --bg-grad-2: radial-gradient(1000px 500px at 120% 10%, rgba(120,119,198,.08), transparent 60%);
  --card-bg: rgba(255,255,255,0.85);
  --card-border: rgba(0,0,0,0.08);
  --glass: blur(10px) saturate(120%);
  --shadow-sm: 0 1px 1px rgba(0,0,0,.05);
  --shadow-md: 0 8px 24px rgba(16,24,40,.10);
  --shadow-lg: 0 18px 48px rgba(9,12,20,.22);
}

:root .dark {
  --bg: #0b0b0e;
  --card-bg: rgba(16,16,20,0.86);
  --card-border: #2a2a33; /* ~ zinc-800 */
  --shadow-sm: 0 1px 1px rgba(0,0,0,.25);
  --shadow-md: 0 10px 28px rgba(0,0,0,.35);
  --shadow-lg: 0 22px 60px rgba(0,0,0,.55);
}

/* Fondo sutil con gradientes (modo Revolut) */
body {
  font-family: ui-sans-serif, system-ui, -apple-system, "Segoe UI", Roboto,
    Ubuntu, Cantarell, "Noto Sans", Helvetica, Arial, "Apple Color Emoji","Segoe UI Emoji";
  background-color: var(--bg);
  background-image: var(--bg-grad-1), var(--bg-grad-2);
  background-attachment: fixed;
}

/* Tipografía algo mayor en móvil y fluida */
@layer base {
  html { font-size: clamp(16px, 3.8vw, 18px); }
  @media (min-width: 640px) { html { font-size: 16px; } }

  h1 { @apply text-2xl font-semibold tracking-tight; }
  h2 { @apply text-xl  font-semibold; }
  h3 { @apply text-lg  font-semibold; }
  p  { @apply leading-relaxed; }
}

/* ──────────────────────────────────────────────
   Componentes visuales genéricos (no rompen nada)
   ────────────────────────────────────────────── */

/* Tarjetas: cualquier contenedor "rounded-2xl + border" gana glass y sombra */
.rounded-2xl.border {
  background: var(--card-bg) !important;
  border-color: var(--card-border) !important;
  box-shadow: var(--shadow-md);
  backdrop-filter: var(--glass);
  -webkit-backdrop-filter: var(--glass);
}

/* Hover sutil en botones “píldora” que ya tienes */
button.rounded-xl,
button.rounded-2xl,
a.rounded-xl,
a.rounded-2xl {
  transition: transform .12s ease, box-shadow .18s ease, background-color .18s ease;
}
button.rounded-xl:hover,
button.rounded-2xl:hover,
a.rounded-xl:hover,
a.rounded-2xl:hover {
  transform: translateY(-1px);
  box-shadow: var(--shadow-sm);
}

/* Inputs y selects con glass suave */
input[type="text"],
input[type="search"],
select,
textarea {
  backdrop-filter: var(--glass);
  -webkit-backdrop-filter: var(--glass);
}

/* Chips (etiquetas pequeñas) más legibles */
[class*="text-[11px]"].px-2.py-1 {
  @apply font-medium;
}

/* Barras de progreso: bordes redondeados completos */
.w-full.h-2.rounded-full > div {
  border-radius: 9999px;
}

/* Mejor contraste del “modo oscuro” en tarjetas internas claras */
.dark .bg-white\/60 { background-color: rgba(255,255,255,0.04) !important; }
.dark .text-white\/60 { color: rgba(255,255,255,0.62) !important; }
.dark .text-white\/50 { color: rgba(255,255,255,0.52) !important; }

/* ──────────────────────────────────────────────
   TABBAR deslizante con flechas (clases que ya usamos)
   ────────────────────────────────────────────── */

[data-role="tabbar"] {
  background: linear-gradient(180deg, rgba(255,255,255,.92), rgba(255,255,255,.88));
  border: 1px solid rgba(0,0,0,0.08);
  box-shadow: var(--shadow-lg);
  backdrop-filter: var(--glass);
  -webkit-backdrop-filter: var(--glass);
}
.dark [data-role="tabbar"] {
  background: rgba(18,18,22,0.86);
  border-color: var(--card-border);
}

/* Carrusel horizontal */
[data-role="tabbar"] .tab-scroll {
  scroll-snap-type: x mandatory;
  -webkit-overflow-scrolling: touch;
}
[data-role="tabbar"] .tabbtn {
  scroll-snap-align: center;
  min-width: 95px;          /* asegura legibilidad */
  height: 56px;             /* tamaño cómodo dedo */
  padding: 8px 10px;
  border-radius: 14px;
  border: 1px solid rgba(0,0,0,0.08);
  background: rgba(255,255,255,.65);
}
.dark [data-role="tabbar"] .tabbtn {
  background: rgba(28,28,34,.55);
  border-color: var(--card-border);
}
[data-role="tabbar"] .tabbtn[aria-current="page"] {
  background: linear-gradient(180deg, rgba(255,255,255,.95), rgba(255,255,255,.90));
  box-shadow: inset 0 0 0 1px rgba(0,0,0,0.06), var(--shadow-sm);
}
.dark [data-role="tabbar"] .tabbtn[aria-current="page"] {
  background: rgba(40,40,48,.85);
}

/* Icono + etiqueta */
[data-role="tabbar"] .tabbtn svg { width: 20px; height: 20px; }
[data-role="tabbar"] .tabbtn span { font-size: 12px; line-height: 1; }

/* Flechas laterales */
[data-role="tabbar"] .tab-arrow {
  width: 36px; height: 36px; border-radius: 9999px;
  background: rgba(255,255,255,.9);
  display: grid; place-items: center;
  border: 1px solid rgba(0,0,0,0.08);
  box-shadow: var(--shadow-md);
}
.dark [data-role="tabbar"] .tab-arrow {
  background: rgba(22,22,26,.88);
  border-color: var(--card-border);
}

/* Oculta scrollbars en el carrusel (iOS/Android/desktop) */
.scrollbar-hide::-webkit-scrollbar { display: none; }
.scrollbar-hide { -ms-overflow-style: none; scrollbar-width: none; }

/* ──────────────────────────────────────────────
   Ajustes responsive útiles
   ────────────────────────────────────────────── */

/* Botón “Mapa del día” y similares: evita desbordes de texto */
button, a, .btn {
  text-wrap: balance;
}

/* Safe area en móviles con notch */
@supports (padding: max(0px)) {
  .pb-safe { padding-bottom: max(16px, env(safe-area-inset-bottom)); }
}
